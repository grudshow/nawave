const formImage=document.querySelector(".authorization__input_file"),formPreview=document.querySelector(".authorization__file");if(formImage){function uploadFile(e){var n=new FileReader;n.onload=e=>{formPreview.innerHTML=`<img src="${e.target.result}" alt="foto">`},n.readAsDataURL(e)}formImage.addEventListener("change",(()=>{uploadFile(formImage.files[0])}))}const ratings=document.querySelectorAll(".rating");function initRatings(){let e,n;for(let e=0;e<ratings.length;e++){t(ratings[e])}function t(e){i(e),a(),e.classList.contains("rating_set")&&function(e){const t=e.querySelectorAll(".rating__item");for(let o=0;o<t.length;o++){const s=t[o];s.addEventListener("mouseenter",(function(n){i(e),a(s.value)})),s.addEventListener("mouseleave",(function(e){a()})),s.addEventListener("click",(function(t){i(e),e.dataset.ajax?r(s.value,e):(n.innerHTML=o+1,a())}))}}(e)}function i(t){e=t.querySelector(".rating__active"),n=t.querySelector(".rating__value")}function a(t=n.innerHTML){const i=t/.05;e.style.width=`${i}%`}async function r(e,t){if(!t.classList.contains("rating_sending")){t.classList.add("rating_sending");let e=await fetch("rating.json",{method:"GET"});if(e.ok){const i=(await e.json()).newRating;n.innerHTML=i,a(),t.classList.remove("rating_sending")}else alert("Ошибка"),t.classList.remove("rating_sending")}}}ratings.length>0&&initRatings();